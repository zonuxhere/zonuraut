<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Explore Nepal — GoNepal</title>
  <meta name="description" content="Explore Nepal — mountains, culture and heritage. Redesigned modern homepage." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    
    /* ========== Variables ========== */
    :root{
      --primary:#004d98;
      --primary-700:#00386e;
      --accent:#ff8a00; /* orange */
      --accent-2:#ffb35b;
      --muted:#6b7280;
      --glass-bg: rgba(255,255,255,0.06);
      --glass-border: rgba(255,255,255,0.09);
      --card-shadow: 0 18px 60px rgba(8,24,64,0.08);
      --radius: 14px;
      --max-width: 1200px;
      --bg: linear-gradient(180deg,#f7f9fc 0%,#f3f6fb 100%);
      --white: #ffffff;
      --success: #28b463;
    }

    :root[data-theme="dark"]{
      --primary:#66b2ff;
      --primary-700:#1f6fb3;
      --bg: linear-gradient(180deg,#071022 0%,#071022 100%);
      --muted:#98a1b3;
      --glass-bg: rgba(255,255,255,0.03);
      --glass-border: rgba(255,255,255,0.06);
      --white:#e8f0ff;
    }

    /* ========== Global ========== */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color: #071022;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }
    [data-theme="dark"] body{ color: #e6f0ff }
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}

    .container{
      max-width:var(--max-width);
      margin:0 auto;
      padding:0 20px;
    }

    /* ========== NAV ========== */
    nav{
      position:fixed;
      top:0;
      left:0;
      right:0;
      z-index:1400;
      transition: all .28s ease;
      background: transparent;
    }

    /* Inner wrapper keeps nav content constrained and responsive */
    .nav-inner{
      max-width:var(--max-width);
      margin:0 auto;
      padding:12px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    /* Scrolled state applies to inner content so the full-width fixed nav stays centered */
    nav.scrolled .nav-inner{
      padding:8px 18px;
      box-shadow: 0 10px 30px rgba(2,8,24,0.08);
      backdrop-filter: blur(6px) saturate(110%);
      background: rgba(255,255,255,0.6);
      border-radius:12px;
      margin:0 12px;
    }
    :root[data-theme="dark"] nav.scrolled .nav-inner{
      background: rgba(6,14,28,0.36);
    }

    .logo{
      display:flex;
      gap:12px;
      align-items:center;
      font-weight:700;
      color:var(--primary-700);
      letter-spacing:0.2px;
      font-size:1.05rem;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
      padding:6px 10px;
      border-radius:10px;
      box-shadow: 0 6px 20px rgba(10,24,60,0.04);
    }
    .logo .mark{
      width:44px;height:44px;border-radius:10px;
      background: linear-gradient(135deg,var(--primary),var(--primary-700));
      display:grid;place-items:center;
      color:var(--white); font-weight:800;
      box-shadow: 0 10px 30px rgba(2,12,35,0.14);
    }

    .nav-links{
      display:flex;
      gap:18px;
      align-items:center;
      margin-left:10px;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      padding-bottom:2px;
    }
    .nav-links a{
      font-weight:600;
      color:var(--muted);
      padding:8px 10px;
      border-radius:8px;
      transition: transform .18s ease, background .18s ease, color .18s ease;
      white-space:nowrap;
    }
    .nav-links a:focus,
    .nav-links a:hover{
      transform: translateY(-4px);
      color:var(--primary-700);
      background: rgba(100,140,255,0.06);
    }

    .auth-buttons{ display:flex; gap:10px; align-items:center; margin-left:auto }
    .btn{
      padding:9px 14px;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
      border:none;
      letter-spacing:0.2px;
      display:inline-flex; gap:8px; align-items:center;
    }
    .btn-outline{
      background:transparent;
      color:var(--primary-700);
      border:1.5px solid rgba(7,18,40,0.06);
    }
    .btn-primary{
      background:var(--accent);
      color:#fff;
      box-shadow: 0 8px 26px rgba(255,138,0,0.16);
    }
    .btn-ghost {
      background:transparent;
      color:var(--muted);
      border:1px solid transparent;
    }

    /* ========== HERO ========== */
    header.hero {
      margin-top:88px;
      min-height:82vh;
      display:grid;
      grid-template-columns: 1fr;
      gap:28px;
      align-items:center;
      padding:48px 20px 24px;
    }
    .hero-left{
      position:relative;
      padding:28px;
      border-radius:20px;
      overflow:visible;
      background:
        linear-gradient(180deg, rgba(2,8,20,0.36), rgba(2,8,20,0.12)),
        url('abc.jpg') center / cover no-repeat;
      box-shadow: var(--card-shadow);
      border: 1px solid rgba(255,255,255,0.04);
      color: #fff;
      backdrop-filter: blur(4px) saturate(120%);
    }

    .hero-eyebrow{ display:flex; gap:10px; align-items:center; margin-bottom:12px }
    .badge{
      background: rgba(255,255,255,0.06);
      color:var(--white);
      padding:8px 12px;
      border-radius:999px;
      font-weight:700;
      font-size:.9rem;
      border:1px solid rgba(255,255,255,0.06);
    }

    .hero-title{
      font-size:2.2rem;
      margin:0 0 12px 0;
      color:var(--white);
      letter-spacing:-0.4px;
    }
    .hero-sub{ margin:0 0 18px 0; color:rgba(255,255,255,0.95); max-width:62ch; font-weight:500 }

    .hero-cta-row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap }

    .discover-btn{
      background:var(--accent);
      color:#fff;
      padding:10px 16px;
      border-radius:12px;
      font-weight:800;
      border:none;
      box-shadow: 0 10px 30px rgba(255,138,0,0.14);
      cursor:pointer;
    }

    /* hero visual */
    .hero-visual{
      height:72vh;
      border-radius:20px;
      overflow:hidden;
      position:relative;
      display:flex;
      align-items:flex-end;
      justify-content:flex-start;
      color:var(--white);
      transition: transform .6s cubic-bezier(.2,.9,.23,1);
      box-shadow: var(--card-shadow);
      background: linear-gradient(135deg, #0a3a6f 0%, #0a2a50 40%, #153e6a 100%);
    }

    .hero-visual img.mountain {
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:center;
      display:block;
      z-index:0;
      filter: saturate(0.98) contrast(0.98);
      -webkit-user-drag: none;
      user-select: none;
    }

    .hero-visual::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(180deg, rgba(2,8,20,0.18), rgba(2,8,20,0.42));
      z-index:1;
    }

    .hero-visual .hero-caption{
      z-index:2;
      margin-left:18px;
      text-shadow: 0 10px 36px rgba(2,8,20,0.6);
      display:flex;
      gap:12px;
      align-items:center;
      color:var(--white);
    }
    .hero-visual h3{ margin:0; font-size:1.6rem }
    .hero-visual p{ margin:6px 0 0; opacity:0.95 }

    /* right column — small glass cards */
    .hero-cards{
      display:flex;
      flex-direction:column;
      gap:18px;
      align-items:stretch;
    }
    .glass-card{
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:14px;
      padding:18px;
      border:1px solid var(--glass-border);
      box-shadow: 0 12px 32px rgba(4,18,40,0.06);
      color:var(--primary-700);
      backdrop-filter: blur(8px) saturate(120%);
      overflow:hidden;
      transition: transform .22s ease, box-shadow .22s ease;
    }
    .glass-card:hover{ transform: translateY(-6px); box-shadow: 0 26px 60px rgba(2,12,35,0.12) }
    .glass-card h4{ margin:0 0 6px 0; font-size:1.05rem }
    .glass-card p{ margin:0; color:var(--muted); font-size:0.95rem }

    .features{
      display:flex; gap:12px; margin-top:12px;
    }
    .feature{
      flex:1; padding:8px; border-radius:10px; text-align:center;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      color:var(--primary-700);
    }

    /* ========== MAIN CONTENT ========== */
    main{
      max-width:var(--max-width);
      margin: 28px auto 80px;
      padding: 0 20px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:20px;
      margin-bottom:28px;
    }
    .card{
      background:#fff;
      border-radius:12px;
      padding:18px;
      box-shadow: 0 12px 30px rgba(10,20,50,0.06);
      transition: transform .25s ease, box-shadow .25s ease;
      overflow:hidden;
    }
    .card:hover{ transform: translateY(-8px); box-shadow: 0 28px 64px rgba(8,18,40,0.12); }
    .card h3{ color:var(--primary-700); margin:0 0 8px 0 }
    .card p{ color:var(--muted); font-size:0.98rem; line-height:1.5 }

    /* tiles */
    .dest-grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:16px;
      margin-bottom:28px;
    }
    .dest, .trek, .adventure, .festival{
      position:relative;
      border-radius:12px;
      overflow:hidden;
      min-height:160px;
      display:flex; flex-direction:column; justify-content:flex-end;
      color:#fff;
      box-shadow: 0 12px 28px rgba(6,16,36,0.08);
      transition: transform .28s ease;
      background-size:cover; background-position:center;
    }
    .dest .overlay, .trek .overlay, .adventure .overlay, .festival .overlay{
      padding:12px;
      background: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.55));
    }
    .dest h4, .trek h4, .adventure h4, .festival h4{ margin:0; font-size:1.05rem }
    .dest p, .trek p, .adventure p, .festival p{ margin:6px 0 0 0; font-size:0.9rem; opacity:0.95 }
    .dest:hover, .trek:hover, .adventure:hover, .festival:hover{ transform: translateY(-6px) scale(1.02) }

    /* compact festival preview updated: reduced to 4, professional card design */
    .fest-preview-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap:18px;
      margin:14px 0 26px;
      align-items:stretch;
    }
    .fest-card{
      position:relative;
      border-radius:14px;
      overflow:hidden;
      min-height:180px;
      background:#111;
      color:#fff;
      box-shadow: 0 18px 48px rgba(6,16,36,0.08);
      border:1px solid rgba(255,255,255,0.03);
      display:flex;
      align-items:flex-end;
      text-decoration:none;
      transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s ease;
    }
    .fest-card:hover{
      transform: translateY(-8px);
      box-shadow: 0 28px 70px rgba(6,18,40,0.16);
    }
    .fest-card figure{
      margin:0; width:100%; height:100%; display:block; position:relative;
    }
    .fest-card img{
      width:100%; height:100%; object-fit:cover; display:block;
      filter: contrast(1.02) saturate(1.05) brightness(.82);
      transition: transform .6s cubic-bezier(.2,.9,.3,1);
    }
    .fest-card:hover img{ transform: scale(1.06); }

    /* overlay content anchored to bottom */
    .fest-card .overlay-card{
      position:absolute;
      left:14px; right:14px; bottom:14px;
      padding:10px 12px;
      border-radius:10px;
      background: linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.55));
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      backdrop-filter: blur(6px);
    }
    .fest-card .overlay-card .left{
      display:flex; gap:10px; align-items:center;
    }
    .fest-card .overlay-card .title{
      font-weight:800; font-size:1rem; line-height:1; color:#fff;
      text-shadow: 0 8px 22px rgba(0,0,0,0.6);
    }
    .fest-card .overlay-card .meta{
      font-size:0.85rem; color:rgba(255,255,255,0.88);
    }
    .fest-card .overlay-card .tag{
      padding:6px 8px; border-radius:8px; background:rgba(255,255,255,0.06); font-weight:700; font-size:11px; color:#fff;
    }

    /* View All link styling (plain, not orange) */
    .view-all-link{
      font-weight:700;
      color:var(--primary-700);
      text-decoration:underline;
      padding:6px 10px;
      border-radius:8px;
      border:1px solid transparent;
    }
    .view-all-link:hover{ background: rgba(0,0,0,0.04) }

    /* footer */
    footer{
      background: linear-gradient(90deg,var(--primary), var(--primary-700));
      color:#fff;
      padding:34px 20px;
      margin-top:42px;
      border-radius:12px;
    }
    footer .row{ display:flex; justify-content:space-between; gap:20px; align-items:flex-start; flex-wrap:wrap }
    footer small{ opacity:0.92; color:#eaf0ff }

    /* modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 3000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(3,6,20,0.5);
      justify-content: center;
      align-items: center;
      padding: 28px;
      backdrop-filter: blur(4px);
    }
    .modal.show{ display:flex }

    .modal-content {
      width: 100%;
      max-width:520px;
      background: linear-gradient(180deg, #fff, #fbfdff);
      border-radius: 16px;
      padding: 22px;
      box-shadow: 0 18px 60px rgba(2,8,24,0.28);
      position: relative;
    }
    .modal .close{
      position:absolute; right:16px; top:10px; font-size:20px; cursor:pointer; color:#234;
    }
    .form-toggle{ display:flex; gap:8px; margin-bottom:12px; background:transparent; }
    .form-toggle button{ flex:1; padding:10px; font-weight:700; border-radius:10px; border:1px solid #eef2fb; cursor:pointer; background:transparent }
    .form-toggle button.active{ background: linear-gradient(90deg,var(--primary), var(--primary-700)); color:#fff; border:none }

    .auth-form{ display:flex; flex-direction:column; gap:10px }
    .auth-form input{
      padding:12px 14px; border-radius:10px; border:1px solid #e6eefc; font-size:0.98rem;
    }
    .auth-form .btn-submit{ padding:12px; border-radius:10px; border:none; font-weight:700; background:var(--primary-700); color:#fff }

    /* popup */
    .popup{
      position: fixed; left:50%; top:14%;
      transform: translateX(-50%) scale(.98);
      background: linear-gradient(90deg,var(--success), #1f9960);
      color:#fff; padding:10px 18px; border-radius:10px;
      box-shadow: 0 12px 36px rgba(2,20,10,0.18);
      z-index:4000; opacity:0; pointer-events:none;
      transition: all .28s ease;
      font-weight:700;
    }

    /* responsive */
    @media (max-width:1100px){
      header.hero{ grid-template-columns:1fr;}
      .hero-visual{ height:56vh; order:2 }
      .hero-cards{ order:1 }
      .grid{ grid-template-columns: repeat(2,1fr) }
      .dest-grid{ grid-template-columns: repeat(2,1fr) }
      .nav-links{ gap:12px; }
      .fest-preview-grid{ gap:12px; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); }
      .qa-reviews { grid-template-columns:1fr; padding:0 12px; }
    }
    @media (max-width:600px){
      nav{ position:sticky; top:0 }
      .nav-inner{ padding:8px 12px }
      .logo{ font-size:1rem }
      .hero-visual{ height:42vh }
      .grid{ grid-template-columns:1fr }
      .dest-grid{ grid-template-columns:1fr }
      .fest-preview-grid{ grid-template-columns:1fr }
      .festival-preview{ flex-direction:column; gap:10px; align-items:flex-start }
      .festival-preview .cta{ margin-left:0 }
      .hero { padding:18px; margin-top:64px }
      .hero-title{ font-size:1.6rem }
    }

    /* make FAQ card fully fluid on smaller screens */
    @media (max-width:720px){
      .faq-card{ max-width:100%; padding:12px; box-sizing:border-box }
    }

    /* reveal animations */
    .reveal{ opacity:0; transform: translateY(8px); transition: all .6s cubic-bezier(.2,.9,.3,1) }
    .reveal.visible{ opacity:1; transform: translateY(0) }

    /* Enhanced animations for cards, buttons, and interactive elements */
    @keyframes slideInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes fadeInScale {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }

    @keyframes glow {
      0%, 100% { box-shadow: 0 0 10px rgba(255,138,0,0.3); }
      50% { box-shadow: 0 0 20px rgba(255,138,0,0.6); }
    }

    /* Apply animations to cards */
    .card { animation: slideInUp .7s ease-out forwards; opacity: 0; }
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.2s; }
    .card:nth-child(3) { animation-delay: 0.3s; }

    .dest, .trek, .adventure, .festival {
      animation: fadeInScale .6s ease-out forwards;
      opacity: 0;
    }
    .dest:nth-child(1) { animation-delay: 0.15s; }
    .dest:nth-child(2) { animation-delay: 0.25s; }
    .dest:nth-child(3) { animation-delay: 0.35s; }
    .dest:nth-child(4) { animation-delay: 0.45s; }

    /* Button hover animations */
    .btn { transition: all .3s cubic-bezier(.2,.9,.3,1); position: relative; }
    .btn:hover { transform: translateY(-2px); }
    .btn-primary:hover { box-shadow: 0 12px 36px rgba(255,138,0,0.3); }
    .btn-outline:hover { background: rgba(100,140,255,0.08); }

    /* Discover button glow animation */
    .discover-btn {
      animation: glow 2s ease-in-out infinite;
    }
    .discover-btn:hover {
      transform: scale(1.05);
      animation: none;
      box-shadow: 0 12px 36px rgba(255,138,0,0.4);
    }

    /* Hero left animation */
    .hero-left {
      animation: slideInLeft .8s ease-out;
    }

    /* Glass cards animation */
    .glass-card {
      animation: slideInRight .7s ease-out forwards;
      opacity: 0;
    }
    .glass-card:nth-child(1) { animation-delay: 0.2s; }
    .glass-card:nth-child(2) { animation-delay: 0.35s; }
    .glass-card:nth-child(3) { animation-delay: 0.5s; }

    /* FAQ item hover animation */
    .faq-item {
      transition: transform .3s ease, box-shadow .3s ease;
    }
    .faq-item:hover {
      transform: translateX(4px);
      box-shadow: 0 6px 20px rgba(100,140,255,0.1);
    }

    /* Rating stars animation */
    .rating-star {
      transition: all .3s cubic-bezier(.2,.9,.3,1);
    }
    .rating-star:hover {
      transform: scale(1.1) translateY(-3px);
    }

    /* Festival card animations */
    .fest-card {
      transition: all .4s cubic-bezier(.2,.9,.3,1);
    }
    .fest-card:hover {
      transform: translateY(-12px) scale(1.02);
      box-shadow: 0 40px 80px rgba(6,18,40,0.2);
    }

    /* Logo animation on hover */
    .logo {
      animation: slideInLeft .8s ease-out;
      transition: all .3s ease;
    }
    .logo:hover {
      transform: scale(1.05);
    }
    .logo .mark {
      transition: all .3s ease;
    }
    .logo:hover .mark {
      transform: rotate(10deg);
      box-shadow: 0 15px 40px rgba(2,12,35,0.25);
    }

    /* ===== Additional minimal styles only for festivals & reviews improvements ===== */
    .fest-feature { display:grid; grid-template-columns: 1fr; gap:12px; align-items:start; width:100%; border-radius:14px; overflow:hidden; background:#fff; }
    .fest-feature .ff-inner { display:flex; gap:12px; align-items:center; padding:12px; }
    .fest-feature img { width:100%; height:160px; object-fit:cover; display:block; border-bottom:1px solid #f2f6ff; }
    .fest-grid-right { display:grid; gap:12px; }
    @media (min-width:901px) { .fest-layout { display:grid; grid-template-columns: 1fr 340px; gap:18px; align-items:start; } }

    /* ===== Scoped styles for QA & Give Rating block (REPLACED) ===== */
    .qa-reviews {
      display:grid;
      grid-template-columns: 540px 1fr;
      gap:18px;
      margin:22px 0 34px;
      max-width:var(--max-width);
      margin-left:auto;
      margin-right:auto;
      padding:0 20px;
      /* center items by default in case the layout becomes single-column */
      justify-items:center;
    }
    @media (max-width:980px){ .qa-reviews { grid-template-columns:1fr; } }

    .faq-card {
      background: linear-gradient(180deg,#fff,#fbfdff);
      border-radius:12px;
      padding:12px;
      box-shadow: 0 18px 48px rgba(6,16,36,0.06);
      border:1px solid #eef6ff;
      overflow:hidden;
      /* constrain width so it looks centered and attractive */
      max-width:720px;
      width:100%;
    }

    .faq-item { border-radius:10px; overflow:hidden; margin-bottom:10px; border:1px solid #f3f7fe; }
    .faq-q { padding:14px 16px; display:flex; align-items:center; justify-content:space-between; gap:12px; cursor:pointer; user-select:none; }
    .faq-q h4 { margin:0; font-size:1rem; color:var(--primary-700); font-weight:800; }
    .faq-arrow { width:44px; height:44px; display:grid; place-items:center; border-radius:10px; background: linear-gradient(180deg, rgba(0,0,0,0.03), rgba(0,0,0,0.02)); color:var(--muted); transition: transform .22s, background .18s; }
    .faq-arrow.open { transform: rotate(180deg); background: linear-gradient(135deg,var(--accent), var(--accent-2)); color:#fff; box-shadow:0 12px 36px rgba(255,138,0,0.12); }
    .faq-a { padding:12px 16px 16px; color:var(--muted); display:none; border-top:1px solid #f4f8ff; font-size:0.96rem; line-height:1.5; }
    .faq-a.show { display:block; }

    /* ===== Give Rating — MATCHES PROVIDED IMAGE (REPLACED STYLES) ===== */
    .give-rating {
      /* big centered soft card like the image */
      width:100%;
      max-width:760px;
      margin: 26px auto;
      background: linear-gradient(180deg, #e9f2ff 0%, #eef6ff 100%);
      border-radius:18px;
      padding:36px 44px 48px;
      box-shadow:
        0 30px 50px rgba(8,24,64,0.08),
        inset 0 1px 0 rgba(255,255,255,0.6);
      border:1px solid rgba(6,24,64,0.04);
      position:relative;
      overflow:visible;
      text-align:center;
    }

    .give-rating h3 {
      margin:0 0 10px 0;
      font-size:2rem;
      color:#1f2937; /* near-black */
      font-weight:800;
      letter-spacing:-0.4px;
    }
    .give-rating p.lead {
      margin:0 auto 22px;
      max-width:68%;
      color:var(--muted);
      line-height:1.6;
      font-size:1rem;
    }

    /* big star row */
    .stars {
      display:flex;
      gap:18px;
      justify-content:center;
      align-items:center;
      margin:18px 0 22px;
    }

    .rating-star {
      --size:56px;
      width:var(--size);
      height:var(--size);
      background: #f1f6ff;
      border-radius:10px;
      display:grid;
      place-items:center;
      font-size:28px;
      cursor:pointer;
      color: #cfcfcf;
      border:1px solid rgba(7,18,40,0.04);
      box-shadow: 0 10px 20px rgba(8,20,50,0.05), 0 6px 0 rgba(255,255,255,0.5) inset;
      transition: transform .18s cubic-bezier(.2,.9,.3,1), box-shadow .18s, background .18s, color .18s;
    }

    .rating-star.selected {
      background: linear-gradient(135deg, #ffd05a, #ffcf6e);
      color:#fff;
      box-shadow: 0 18px 36px rgba(255,160,40,0.14);
      transform: translateY(-10px);
    }

    .rating-star.unfilled {
      background:#f1f6ff;
      color:#cfcfcf;
      transform: translateY(0);
    }

    /* textarea with big rounded inset (neumorphic) */
    .rating-text {
      margin:22px auto 6px;
      width:88%;
      max-width:640px;
    }
    .rating-text textarea {
      width:100%;
      min-height:140px;
      resize:vertical;
      padding:18px;
      border-radius:12px;
      border: none;
      background: linear-gradient(180deg,#eef5ff,#f4f9ff);
      box-shadow:
        inset 0 10px 18px rgba(8,24,64,0.04),
        0 10px 20px rgba(10,20,40,0.04);
      color:var(--muted);
      font-size:1rem;
      outline:none;
      transition: box-shadow .18s;
    }
    .rating-text textarea::placeholder { color: #9aa6c6; }
    .rating-text textarea:focus {
      box-shadow:
        inset 0 12px 22px rgba(8,24,64,0.06),
        0 18px 40px rgba(6,20,50,0.06);
    }

    /* Send button pill centered */
    .give-controls { display:flex; justify-content:center; margin-top:18px; }
    .btn-send {
      background: linear-gradient(90deg,#ffd05a,#ffcf6e);
      color:#1f2937;
      font-weight:800;
      padding:14px 44px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      box-shadow: 0 22px 40px rgba(255,160,40,0.14);
      font-size:1rem;
      transition: transform .14s ease, box-shadow .14s ease;
    }
    .btn-send:active { transform: translateY(2px); }

    /* subtle footer spacing */
    .give-footer { margin-top:14px; color:var(--muted); font-size:0.95rem; }

    @media (max-width:820px){
      .give-rating { padding:22px; border-radius:14px; }
      .give-rating p.lead { max-width:100%; padding:0 8px; }
      .rating-text textarea { min-height:120px; }
      .rating-star { --size:48px; font-size:24px; }
      .btn-send { padding:12px 32px; }
    }

    @media (prefers-reduced-motion: reduce){
      .rating-star, .btn-send { transition:none !important; animation:none !important; }
    }
  </style>
</head>
<body>

  <nav aria-label="Main navigation" id="siteNav">
    <div class="nav-inner container">
      <div style="display:flex; align-items:center; gap:12px; min-width:0">
        <div class="logo" aria-hidden="false" style="flex-shrink:0">
          <div class="mark" aria-hidden="true">GN</div>
          <div>
            <div>GoNepal</div>
            <div style="font-size:11px;opacity:.86">Explore Nepal</div>
          </div>
        </div>

        <div class="nav-links" role="navigation" aria-label="Primary" id="primaryNav">
          <a href="hello.html">Home</a>
          <a href="heritages.html">Heritages</a>
          <a href="touristspots.html">Destinations</a>
          <a href="about.html">Trekking</a>
          <a href="festivals.html">Festivals</a>
        </div>
        
      </div>

      <div class="auth-buttons" role="group" aria-label="Account controls">
        <button class="btn btn-ghost" id="themeToggle" aria-pressed="false" title="Toggle dark mode" aria-label="Toggle theme">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="#0b1220" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
          Theme
        </button>

        <button class="btn btn-outline login-trigger" id="loginOpen">Login / Sign up</button>
        <button class="btn btn-primary" id="logout-btn" style="display:none">Logout</button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero container" id="home" role="banner">
    <div class="hero-left reveal" aria-hidden="false">
      <div class="hero-eyebrow">
        <div class="badge">Nepal • Himalayas</div>
      </div>

      <h1 class="hero-title">Welcome to Nepal — The Roof of the World</h1>
      <p class="hero-sub">From soaring Himalayan peaks to sacred heritage sites — explore treks, culture, and timeless landscapes. Plan your next journey responsibly and support local communities.</p>

      <div class="hero-cta-row" style="margin-top:12px">
        <button class="discover-btn" id="discoverBtn">Discover</button>
      </div>
    </div>

    <aside class="hero-cards" aria-label="Highlights">
      <div class="glass-card reveal">
        <h4>Why Nepal?</h4>
        <p>Home to Mount Everest, living cultures, and centuries-old heritage — Nepal offers adventure and serenity in one trip.</p>
        <div class="features" aria-hidden>
          <div class="feature"><strong>180+</strong><h5>Peaks</h5></div>
          <div class="feature"><strong>10+</strong><h5>UNESCO sites</h5></div>
          <div class="feature"><strong>1000+</strong><h5>Trails</h5></div>
        </div>
      </div>

      <div class="glass-card reveal">
        <h4>Plan With Respect</h4>
        <p>Support local guides, stick to marked trails, and respect religious sites and customs. Leave no trace and contribute to conservation.</p>
      </div>

      <div class="hero-visual reveal" id="visual" aria-hidden="false" role="img" aria-label="Himalayan panorama">
        <img class="mountain" src="nagar.jpg" alt="Nagar panorama" loading="lazy">

        <div class="hero-caption">
          <div>
            <h3>Mountains. Culture. Adventure.</h3>
            <p>Experience the Himalayas, UNESCO heritage sites, and vibrant local life.</p>
            <div style="margin-top:10px; display:flex; gap:8px">
              <span style="background:rgba(255,255,255,0.06);padding:6px 10px;border-radius:999px;font-weight:700;color:var(--white)">180+ Peaks</span>
              <span style="background:rgba(255,255,255,0.04);padding:6px 10px;border-radius:999px;font-weight:700;color:var(--white)">UNESCO Sites</span>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </header>

  <!-- MAIN -->
  <main>
    <!-- intro cards -->
    <section class="grid" aria-labelledby="introduction">
      <div class="card reveal" id="intro">
        <h3 id="introduction">Introduction</h3>
        <p>Nepal is a landlocked country in South Asia, bordered by India and China. It contains eight of the world's top ten highest peaks and is rich in multi-ethnic culture and heritage.</p>
      </div>

      <div class="card reveal">
        <h3>Map & Provinces</h3>
        <p>Nepal is divided into 7 provinces: Province No.1, Province No.2, Bagmati, Gandaki, Lumbini (Province No.5), Karnali and Sudurpashchim. Kathmandu is the capital and cultural hub.</p>
      </div>

      <div class="card reveal">
        <h3>Where is Nepal?</h3>
        <p>Between India and China in the Himalayas. The country features the high Himalayan region, mid hills, and lowland Terai plains.</p>
      </div>
    </section>

    <!-- Destinations grid -->
    <h2 style="color:var(--primary-700); margin: 10px 0 12px">Top Destinations</h2>
    <section class="dest-grid" id="destinations" aria-label="Destinations">
      <div class="dest reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('ktm.jpg'); background-size:cover;">
        <div class="overlay"><h4>Kathmandu Valley</h4><p>Heritage, temples & living culture</p></div>
      </div>
      <div class="dest reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('pokhara.jpg'); background-size:cover;">
        <div class="overlay"><h4>Pokhara</h4><p>Lakeside & Annapurna views</p></div>
      </div>
      <div class="dest reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('chitwan1.jpg'); background-size:cover;">
        <div class="overlay"><h4>Chitwan</h4><p>Wildlife safaris & jungles</p></div>
      </div>
      <div class="dest reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('mteverest.jpg'); background-size:cover;">
        <div class="overlay"><h4>Everest Region</h4><p>Trekking & high-altitude vistas</p></div>
      </div>
    </section>

    <!-- Top Trekking -->
    <h2 style="color:var(--primary-700); margin: 18px 0 12px">Top Trekking Available in Nepal</h2>
    <section class="dest-grid" id="trekking" aria-label="Top trekking">
      <div class="trek reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('annapurna.jpg'); background-size:cover;">
        <div class="overlay"><h4>Annapurna Circuit</h4><p>Classic circuit with diverse scenery & cultural villages</p></div>
      </div>
      <div class="trek reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('everestbase.jpg'); background-size:cover;">
        <div class="overlay"><h4>Everest Base Camp</h4><p>Iconic trek to the foot of the world’s highest peak</p></div>
      </div>
      <div class="trek reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('langtang.jpg'); background-size:cover;">
        <div class="overlay"><h4>Langtang Valley</h4><p>Close-to-Kathmandu trek with glacier views and Tamang culture</p></div>
      </div>
      <div class="trek reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('dolpo.jpg'); background-size:cover;">
        <div class="overlay"><h4>Upper Dolpo</h4><p>Remote high-altitude plateau, rich culture and solitude</p></div>
      </div>
    </section>

    <!-- Top Adventures -->
    <h2 style="color:var(--primary-700); margin: 18px 0 12px">Top Adventures in Nepal</h2>
    <section class="dest-grid" id="adventures" aria-label="Top adventures">
      <div class="adventure reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('paragliding.jpg'); background-size:cover;">
        <div class="overlay"><h4>Paragliding</h4><p>Soar over Pokhara's lakeside with panoramic mountain views</p></div>
      </div>
      <div class="adventure reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('bungeejump.jpg'); background-size:cover;">
        <div class="overlay"><h4>Bungee Jumping</h4><p>Adrenaline-pumping jumps over deep valleys and rivers</p></div>
      </div>
      <div class="adventure reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('junglesafari.jpg'); background-size:cover;">
        <div class="overlay"><h4>Jungle Safari</h4><p>Wildlife experiences in Chitwan & Bardiya national parks</p></div>
      </div>
      <div class="adventure reveal" style="background-image:linear-gradient(180deg, rgba(5,20,40,0.18), rgba(0,0,0,0.3)), url('rafting.jpg'); background-size:cover;">
        <div class="overlay"><h4>Rafting</h4><p>White-water action on rivers like Trishuli & Bhote Koshi</p></div>
      </div>
    </section>

    <!-- Festivals -->
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; margin: 12px 0;">
      <h2 style="color:var(--primary-700); margin:0">Festivals & Events</h2>
      <a href="festivals.html" class="view-all-link">View All</a>
    </div>

    <section class="fest-layout reveal" aria-label="Festivals preview" style="margin-bottom:24px;">
      <div class="fest-feature" style="border-radius:14px; overflow:hidden;">
        <a href="festivals.html#bisket-jatra" style="text-decoration:none;color:inherit; display:block;">
          <img src="jatra.jpg.jpg" alt="Bisket Jatra image" loading="lazy">
          <div class="ff-inner" style="padding:12px;">
            <div style="flex:1">
              <div style="display:flex; gap:8px; align-items:center; margin-bottom:8px;">
                <span style="background:var(--accent); color:#fff; padding:6px 10px; border-radius:999px; font-weight:800; font-size:12px;">Featured</span>
                <span style="font-weight:700; color:var(--muted); font-size:13px;">Bhaktapur</span>
              </div>
              <h3 style="margin:0 0 6px 0; color:var(--primary-700);">Bisket Jatra — New Year Chariot Parade</h3>
              <p style="margin:0; color:var(--muted); max-width:56ch;">Ancient chariot processions, lively crowds and community rituals welcoming the Nepali new year — an immersive cultural highlight.</p>
            </div>

            <div style="display:flex; flex-direction:column; gap:8px; align-items:flex-end;">
              <span style="background:rgba(0,0,0,0.06); padding:8px 12px; border-radius:10px; font-weight:700;">May / April</span>
            </div>
          </div>
        </a>
      </div>

      <div class="fest-grid-right" style="width:340px;">
        <a href="festivals.html#dashain" class="fest-card" style="min-height:84px; display:flex; align-items:center; padding:8px; gap:12px; background:#fff; color:inherit; border-radius:10px; box-shadow:0 10px 26px rgba(6,16,36,0.06); border:1px solid rgba(0,0,0,0.04);">
          <img src="dashain1.jpg" alt="Dashain image" style="width:84px; height:64px; object-fit:cover; border-radius:8px;">
          <div style="flex:1;">
            <div style="font-weight:800; color:var(--primary-700);">Dashain</div>
            <div style="color:var(--muted); font-size:13px;">Nationwide — Biggest Hindu festival of Nepal</div>
          </div>
          <div style="font-weight:700; color:var(--muted); font-size:12px;">Sep/Oct</div>
        </a>

        <a href="festivals.html#tihar" class="fest-card" style="min-height:84px; display:flex; align-items:center; padding:8px; gap:12px; background:#fff; color:inherit; border-radius:10px; box-shadow:0 10px 26px rgba(6,16,36,0.06); border:1px solid rgba(0,0,0,0.04);">
          <img src="tihar.jpg" alt="Tihar image" style="width:84px; height:64px; object-fit:cover; border-radius:8px;">
          <div style="flex:1;">
            <div style="font-weight:800; color:var(--primary-700);">Tihar</div>
            <div style="color:var(--muted); font-size:13px;">Festival of lights — garlands, lamps & cultural rites</div>
          </div>
          <div style="font-weight:700; color:var(--muted); font-size:12px;">Oct/Nov</div>
        </a>

        <a href="festivals.html#holi" class="fest-card" style="min-height:84px; display:flex; align-items:center; padding:8px; gap:12px; background:#fff; color:inherit; border-radius:10px; box-shadow:0 10px 26px rgba(6,16,36,0.06); border:1px solid rgba(0,0,0,0.04);">
          <img src="holi.jpg" alt="Holi image" style="width:84px; height:64px; object-fit:cover; border-radius:8px;">
          <div style="flex:1;">
            <div style="font-weight:800; color:var(--primary-700);">Holi</div>
            <div style="color:var(--muted); font-size:13px;">Festival of colors — music, dance & street celebrations</div>
          </div>
          <div style="font-weight:700; color:var(--muted); font-size:12px;">Mar</div>
        </a>
      </div>
    </section>

    <!-- ====== NEW: Attractive FAQ (centered) ====== -->
    <div class="qa-reviews reveal" aria-label="FAQs and Site Reviews" style="grid-template-columns:1fr; justify-items:center;">
      <div class="faq-card" aria-labelledby="faqTitle">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
          <div>
            <div id="faqTitle" style="font-weight:900; color:var(--primary-700); font-size:1.05rem;">FAQs</div>
            <div style="color:var(--muted); font-size:0.95rem; margin-top:6px;">Quick answers to common traveler questions about Nepal</div>
          </div>
        </div>

        <div style="margin-top:12px;">
          <div class="faq-item" aria-hidden="false">
            <div class="faq-q" tabindex="0" aria-expanded="false" aria-controls="a1">
              <h4>When is the best time to visit Nepal?</h4>
              <div class="faq-arrow" aria-hidden="true">▾</div>
            </div>
            <div class="faq-a" id="a1">
              Spring (March–May) and autumn (September–November) are the most popular: clear mountain views, pleasant trekking weather, and cultural festivals. Winters are cold at altitude; monsoon months bring rain in the lowlands.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-q" tabindex="0" aria-expanded="false" aria-controls="a2">
              <h4>Do I need a visa to enter Nepal?</h4>
              <div class="faq-arrow" aria-hidden="true">▾</div>
            </div>
            <div class="faq-a" id="a2">
              Many nationalities can obtain a tourist visa on arrival at Tribhuvan International Airport and most land crossings. You can also apply online for an e-visa. Check Nepal Immigration for up-to-date details.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-q" tabindex="0" aria-expanded="false" aria-controls="a3">
              <h4>Is it safe to trek independently?</h4>
              <div class="faq-arrow" aria-hidden="true">▾</div>
            </div>
            <div class="faq-a" id="a3">
              Popular trails are well-traveled, but conditions and altitude risks remain. Hiring a registered guide or joining a reputable operator is recommended for safety, permit handling, and local support.
            </div>
          </div>

          <div style="margin-top:8px; color:var(--muted); font-size:0.95rem;">
            Tip: Use <strong>local tourist offices</strong> and official municipality pages for event dates, permits, and current travel advisories.
          </div>
        </div>
      </div>
    </div>

    <!-- ====== UPDATED: Give Rating (styled to match the image) ====== -->
    <section class="give-rating reveal" aria-label="Give site rating" id="giveRating" style="position:relative;">
      <!-- title and description -->
      <h3>Rate your experience</h3>
      <p class="lead">We highly value your feedback! Kindly take a moment to rate your experience and provide us with your valuable feedback.</p>

      <!-- stars -->
      <div class="stars" id="siteStars" role="radiogroup" aria-label="Rate site">
        <button class="rating-star unfilled" data-value="1" aria-label="1 star">★</button>
        <button class="rating-star unfilled" data-value="2" aria-label="2 stars">★</button>
        <button class="rating-star unfilled" data-value="3" aria-label="3 stars">★</button>
        <button class="rating-star unfilled" data-value="4" aria-label="4 stars">★</button>
        <button class="rating-star unfilled" data-value="5" aria-label="5 stars">★</button>
      </div>

      <!-- textarea -->
      <div class="rating-text">
        <textarea id="ratingComment" placeholder="Tell us about your experience!"></textarea>
      </div>

      <!-- send button -->
      <div class="give-controls">
        <button id="siteSubmit" class="btn-send">Send</button>
      </div>

      <div class="give-footer" aria-live="polite">
        <span id="siteCount">No ratings yet</span>
      </div>
    </section>

    <!-- (Remaining content unchanged) -->

  </main>

  <!-- FOOTER -->
  <footer aria-labelledby="footerTitle">
    <div class="container row">
      <div style="max-width:520px">
        <h3 id="footerTitle" style="margin:0 0 8px 0;color:#fff">GoNepal</h3>
        <small>Designed for KCT Webwar. All rights reserved by BSc.CSIT</small>
        <div style="margin-top:12px; display:flex; gap:12px; align-items:center">
          <a href="#" aria-label="Facebook" style="color:#fff"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M18 2h-3a4 4 0 00-4 4v3H8v4h3v8h4v-8h3l1-4h-4V6a1 1 0 011-1h3z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
          <a href="#" aria-label="Instagram" style="color:#fff"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="5" stroke="#fff" stroke-width="1.2"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/><path d="M17.5 6.5h.01" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
          <a href="#" aria-label="Twitter" style="color:#fff"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M23 3a10.9 10.9 0 01-3.14 1.53A4.48 4.48 0 0012 7v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z" stroke="#fff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
        </div>
      </div>
      <div style="text-align:right">
        <small>Contact: info@gonepal.example</small><br>
        <small>Follow us for travel tips & updates</small>
      </div>
    </div>
  </footer>

  <!-- LOGIN / SIGNUP MODAL -->
  <div id="auth-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="authTitle">
    <div class="modal-content" role="document">
      <button class="close" title="Close" aria-label="Close modal" id="modalClose">&times;</button>
      <div class="form-toggle" role="tablist" aria-label="Authentication">
        <button id="login-tab" class="active" role="tab" aria-selected="true">Login</button>
        <button id="signup-tab" role="tab" aria-selected="false">Sign Up</button>
      </div>

      <!-- LOGIN FORM -->
      <form id="login-form" class="auth-form" aria-labelledby="authTitle">
        <h3 id="authTitle">Welcome back</h3>
        <input id="loginEmail" type="email" placeholder="Email" required autocomplete="username">
        <input id="loginPassword" type="password" placeholder="Password" required autocomplete="current-password">
        <button type="submit" class="btn-submit">Login</button>
        <p style="font-size:13px; color:#475569">Don't have an account? <span id="switch-to-signup" style="color:var(--primary-700);cursor:pointer;font-weight:700">Sign Up</span></p>
      </form>

      <!-- SIGNUP FORM -->
      <form id="signup-form" class="auth-form" style="display:none;">
        <h3>Create account</h3>
        <input id="signupName" type="text" placeholder="Full name" required autocomplete="name">
        <input id="signupEmail" type="email" placeholder="Email" required autocomplete="email">
        <input id="signupPassword" type="password" placeholder="Password" required autocomplete="new-password">
        <button type="submit" class="btn-submit">Create account</button>
        <p style="font-size:13px; color:#475569">Already have an account? <span id="switch-to-login" style="color:var(--primary-700);cursor:pointer;font-weight:700">Login</span></p>
      </form>
    </div>
  </div>

  <!-- Success Popup -->
  <div id="success-popup" class="popup" role="status" aria-live="polite">Success!</div>

  <script>
    // ======= Elements (preserve existing behavior)
    const loginTrigger = document.querySelectorAll('.login-trigger');
    const logoutBtn = document.getElementById('logout-btn');
    const modal = document.getElementById('auth-modal');
    const modalClose = document.getElementById('modalClose');
    const loginTab = document.getElementById('login-tab');
    const signupTab = document.getElementById('signup-tab');
    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const switchToSignup = document.getElementById('switch-to-signup');
    const switchToLogin = document.getElementById('switch-to-login');
    const popup = document.getElementById('success-popup');
    const heroVisual = document.getElementById('visual');
    const siteNav = document.getElementById('siteNav');
    const themeToggle = document.getElementById('themeToggle');
    const headerHero = document.querySelector('header.hero');
    const discoverBtn = document.getElementById('discoverBtn');

    function showPopup(message){
      popup.textContent = message;
      popup.style.opacity = '1';
      popup.style.transform = 'translateX(-50%) scale(1)';
      popup.style.pointerEvents = 'auto';
      setTimeout(()=>{ popup.style.opacity='0'; popup.style.pointerEvents='none'; }, 2200);
    }

    // Modal + focus trap
    let lastFocused = null;
    function openModal(){
      lastFocused = document.activeElement;
      modal.classList.add('show');
      modal.setAttribute('aria-hidden','false');
      setTimeout(()=> loginForm.querySelector('input')?.focus(), 120);
      trapFocus(modal);
    }
    function closeModal(){
      modal.classList.remove('show');
      modal.setAttribute('aria-hidden','true');
      releaseFocusTrap();
      lastFocused?.focus?.();
    }

    let focusable, firstFocusable, lastFocusable, handleTrap;
    function trapFocus(container){
      focusable = container.querySelectorAll('a[href], button:not([disabled]), input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if(focusable.length === 0) return;
      firstFocusable = focusable[0]; lastFocusable = focusable[focusable.length - 1];
      handleTrap = function(e){
        if(e.key === 'Tab'){
          if(e.shiftKey && document.activeElement === firstFocusable){
            e.preventDefault(); lastFocusable.focus();
          } else if(!e.shiftKey && document.activeElement === lastFocusable){
            e.preventDefault(); firstFocusable.focus();
          }
        } else if(e.key === 'Escape'){
          closeModal();
        }
      };
      document.addEventListener('keydown', handleTrap);
    }
    function releaseFocusTrap(){
      if(handleTrap) document.removeEventListener('keydown', handleTrap);
      focusable = null;
    }

    // Tabs
    function showLogin(){
      loginForm.style.display = 'flex';
      signupForm.style.display = 'none';
      loginTab.classList.add('active');
      signupTab.classList.remove('active');
      loginTab.setAttribute('aria-selected','true');
      signupTab.setAttribute('aria-selected','false');
    }
    function showSignup(){
      signupForm.style.display = 'flex';
      loginForm.style.display = 'none';
      signupTab.classList.add('active');
      loginTab.classList.remove('active');
      signupTab.setAttribute('aria-selected','true');
      loginTab.setAttribute('aria-selected','false');
    }

    // Connect UI
    document.querySelectorAll('.login-trigger').forEach(btn => btn.addEventListener('click', () => { openModal(); showLogin(); }));
    document.getElementById('loginOpen')?.addEventListener('click', () => { openModal(); showLogin(); });
    loginTab.addEventListener('click', showLogin);
    signupTab.addEventListener('click', showSignup);
    switchToSignup.addEventListener('click', () => { showSignup(); });
    switchToLogin.addEventListener('click', () => { showLogin(); });
    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });

    // Fake auth
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      localStorage.setItem('loggedIn', 'true');
      closeModal();
      showPopup('Login Successful!');
      updateAuthUI(true);
    });
    signupForm.addEventListener('submit', (e) => {
      e.preventDefault();
      localStorage.setItem('loggedIn', 'true');
      closeModal();
      showPopup('Account created!');
      updateAuthUI(true);
    });
    logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('loggedIn');
      showPopup('Logged out');
      updateAuthUI(false);
      window.scrollTo({top:0, behavior:'smooth'});
    });
    function updateAuthUI(loggedIn){
      if(loggedIn){
        logoutBtn.style.display = 'inline-flex';
        document.querySelectorAll('.login-trigger').forEach(n => n.style.display = 'none');
        document.getElementById('loginOpen') && (document.getElementById('loginOpen').style.display = 'none');
      } else {
        logoutBtn.style.display = 'none';
        document.querySelectorAll('.login-trigger').forEach(n => n.style.display = 'inline-flex');
        document.getElementById('loginOpen') && (document.getElementById('loginOpen').style.display = 'inline-block');
      }
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      updateAuthUI(localStorage.getItem('loggedIn') === 'true');

      // reveal animations
      setTimeout(()=> {
        document.querySelectorAll('.reveal').forEach((el,i) => {
          setTimeout(()=> el.classList.add('visible'), 80*i);
        });
      }, 160);

      // parallax hero subtle effect
      if(window.innerWidth > 900 && heroVisual){
        document.addEventListener('mousemove', (e) => {
          const x = (e.clientX - window.innerWidth/2) / (window.innerWidth/2);
          const y = (e.clientY - window.innerHeight/2) / (window.innerHeight/2);
          heroVisual.style.transform = `translate(${x*6}px, ${y*4}px) scale(1.01)`;
        });
      }

      // theme from localStorage
      const savedTheme = localStorage.getItem('theme');
      if(savedTheme) document.documentElement.setAttribute('data-theme', savedTheme);
      themeToggle.setAttribute('aria-pressed', (savedTheme === 'dark') ? 'true' : 'false');

      // Adjust header top spacing based on the nav's actual height
      function adjustHeaderMargin() {
        if (!headerHero) return;
        const navRect = siteNav.getBoundingClientRect();
        headerHero.style.marginTop = (Math.ceil(navRect.height) + 12) + 'px';
      }
      adjustHeaderMargin();
      window.addEventListener('resize', adjustHeaderMargin);
      window.addEventListener('orientationchange', adjustHeaderMargin);

      // Restrict primary nav features to logged-in users (Home always allowed)
      const primaryLinks = document.querySelectorAll('#primaryNav a');
      primaryLinks.forEach(link => {
        link.addEventListener('click', (ev) => {
          const href = link.getAttribute('href') || '';
          // allow home link (hello.html or '#') without login
          const isHome = href === '' || href === '#' || href.endsWith('hello.html');
          if(isHome) return; // allow navigation

          // if not logged in, block and show modal/login prompt
          if(localStorage.getItem('loggedIn') !== 'true'){
            ev.preventDefault();
            showPopup('Please login to access this feature');
            // open login modal to encourage sign-in
            openModal();
            showLogin();
            return false;
          }
          // otherwise allow the click to proceed
        });
      });

      // Restrict "View All" link for festivals (same restriction as primary nav)
      const viewAllLink = document.querySelector('.view-all-link');
      if(viewAllLink){
        viewAllLink.addEventListener('click', (ev) => {
          if(localStorage.getItem('loggedIn') !== 'true'){
            ev.preventDefault();
            showPopup('Please login to access this feature');
            openModal();
            showLogin();
            return false;
          }
          // otherwise allow the click to proceed
        });
      }
    });

    // allow ESC to close
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && modal.classList.contains('show')) closeModal();
    });

    // navbar scrolled
    window.addEventListener('scroll', () => {
      if(window.scrollY > 40) siteNav.classList.add('scrolled'); else siteNav.classList.remove('scrolled');
    });

    // theme toggle
    themeToggle.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'dark' ? '' : 'dark';
      if(next) document.documentElement.setAttribute('data-theme', next); else document.documentElement.removeAttribute('data-theme');
      localStorage.setItem('theme', next);
      themeToggle.setAttribute('aria-pressed', next === 'dark' ? 'true' : 'false');
      showPopup(next === 'dark' ? 'Dark mode enabled' : 'Light mode enabled');
    });

    // Discover now scrolls to Introduction
    discoverBtn?.addEventListener('click', (e) => {
      e.preventDefault();
      const introEl = document.getElementById('introduction');
      if(introEl) introEl.scrollIntoView({behavior:'smooth', block:'start'});
    });

    (function enableFocusOutline(){
      document.body.addEventListener('keydown', (ev) => {
        if(ev.key === 'Tab') document.documentElement.classList.add('show-focus');
      }, { once: true });
    })();

    /* ===== NEW: Interactive accordion + site-wide reviews (only scripts for these blocks) ===== */
    (function initQAandSiteReviews(){
      // Accordion behavior
      function toggleFaq(qEl){
        const parent = qEl.parentElement;
        const answer = parent.querySelector('.faq-a');
        const arrow = qEl.querySelector('.faq-arrow');
        const expanded = qEl.getAttribute('aria-expanded') === 'true';

        // close other open items
        document.querySelectorAll('.faq-q[aria-expanded="true"]').forEach(other => {
          if(other !== qEl){
            other.setAttribute('aria-expanded','false');
            other.parentElement.querySelector('.faq-a')?.classList.remove('show');
            other.querySelector('.faq-arrow')?.classList.remove('open');
          }
        });

        if(expanded){
          qEl.setAttribute('aria-expanded','false');
          answer.classList.remove('show');
          arrow.classList.remove('open');
        } else {
          qEl.setAttribute('aria-expanded','true');
          answer.classList.add('show');
          arrow.classList.add('open');
        }
      }
      document.querySelectorAll('.faq-q').forEach(q => {
        q.setAttribute('role','button');
        q.setAttribute('tabindex','0');
        q.setAttribute('aria-expanded','false');
        q.addEventListener('click', () => toggleFaq(q));
        q.addEventListener('keydown', e => {
          if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleFaq(q); }
          if(e.key === 'ArrowDown'){ e.preventDefault(); const next = q.parentElement.nextElementSibling; next?.querySelector('.faq-q')?.focus(); }
          if(e.key === 'ArrowUp'){ e.preventDefault(); const prev = q.parentElement.previousElementSibling; prev?.querySelector('.faq-q')?.focus(); }
        });
      });

      // SITE RATING: wire elements present in the new Give Rating UI
      const starEls = document.querySelectorAll('#siteStars .rating-star');
      const submitBtn = document.getElementById('siteSubmit') || document.querySelector('.btn-send') || document.getElementById('siteSubmit');
      const avgEl = document.getElementById('siteAvg');
      const countEl = document.getElementById('siteCount');
      const confetti = document.getElementById('confettiContainer');

      // prepare confetti pieces (not visible in this design but left for compatibility)
      if(confetti && confetti.children.length === 0){
        const colors = ['#ff8a00','#ffb35b','#ffd28a','#ffe8c8','#ff9b3a'];
        for(let i=0;i<18;i++){
          const s = document.createElement('span');
          s.style.left = (20 + Math.random()*260) + 'px';
          s.style.background = colors[i % colors.length];
          s.style.transform = `rotate(${Math.random()*360}deg)`;
          confetti.appendChild(s);
        }
      }

      // load stored aggregated ratings
      let stored = null;
      try { stored = JSON.parse(localStorage.getItem('gonepal_site_rating') || 'null'); } catch(e){ stored = null; }
      let ratingData = stored && typeof stored.sum === 'number' && typeof stored.count === 'number' && stored.breakdown ? stored : { sum:0, count:0, breakdown: {1:0,2:0,3:0,4:0,5:0} };
      let selected = null;

      function updateDisplay(){
        if(!countEl) return;
        if(ratingData.count === 0){
          if(avgEl) avgEl.textContent = '—';
          countEl.textContent = 'No ratings yet';
        } else {
          const avg = ratingData.sum / ratingData.count;
          if(avgEl) avgEl.textContent = avg.toFixed(1);
          countEl.textContent = ratingData.count + ' rating' + (ratingData.count > 1 ? 's' : '');
        }
      }

      // star interactions (visual, selection)
      starEls.forEach(st => {
        st.setAttribute('tabindex','0');
        st.addEventListener('mouseenter', () => {
          const v = Number(st.dataset.value);
          starEls.forEach(s => s.classList.toggle('hover', Number(s.dataset.value) <= v));
        });
        st.addEventListener('mouseleave', () => starEls.forEach(s => s.classList.remove('hover')));
        st.addEventListener('click', () => {
          selected = Number(st.dataset.value);
          starEls.forEach(s => {
            const val = Number(s.dataset.value);
            if(val <= selected){
              s.classList.add('selected');
              s.classList.remove('unfilled');
            } else {
              s.classList.remove('selected');
              s.classList.add('unfilled');
            }
            s.setAttribute('aria-checked', (Number(s.dataset.value) === selected).toString());
          });
        });
        st.addEventListener('keydown', (e) => {
          const curr = Number(document.activeElement.dataset.value);
          if(e.key === 'ArrowRight' || e.key === 'ArrowUp'){ e.preventDefault(); const next = Math.min(5, curr+1); document.querySelector('#siteStars .rating-star[data-value="'+next+'"]')?.focus(); }
          if(e.key === 'ArrowLeft' || e.key === 'ArrowDown'){ e.preventDefault(); const prev = Math.max(1, curr-1); document.querySelector('#siteStars .rating-star[data-value="'+prev+'"]')?.focus(); }
          if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); selected = curr; starEls.forEach(s => { const val = Number(s.dataset.value); if(val <= selected){ s.classList.add('selected'); s.classList.remove('unfilled'); } else { s.classList.remove('selected'); s.classList.add('unfilled'); } }); }
        });
      });

      // submit action: reuse existing localStorage model (sum,count,breakdown)
      (submitBtn||{}).addEventListener && submitBtn.addEventListener('click', (ev) => {
        // require login before accepting rating
        if(localStorage.getItem('loggedIn') !== 'true'){
          showPopup('You must login for Rating');
          // reset visual selection so user doesn't think rating was accepted
          selected = null;
          starEls.forEach(s => {
            s.classList.remove('selected','hover');
            s.classList.add('unfilled');
            s.removeAttribute('aria-checked');
          });
          return;
        }
        if(!selected){ showPopup('Please select a star rating first'); return; }
        if(localStorage.getItem('gonepal_site_voted') === 'true'){ showPopup('You have already rated the site'); return; }

        ratingData.sum = (ratingData.sum || 0) + selected;
        ratingData.count = (ratingData.count || 0) + 1;
        ratingData.breakdown[selected] = (ratingData.breakdown[selected] || 0) + 1;
        localStorage.setItem('gonepal_site_rating', JSON.stringify(ratingData));
        localStorage.setItem('gonepal_site_voted', 'true');

        updateDisplay();
        showPopup('Thanks — your site rating is recorded!');

        // disable submit visually
        try{
          submitBtn.disabled = true;
          if(submitBtn.classList.contains('btn-send')) submitBtn.textContent = 'Thanks!';
          else submitBtn.textContent = 'Thankyou for rating.';
          submitBtn.style.opacity = '0.85';
        } catch(e){}

        // small confetti burst (if present)
        if(confetti){
          confetti.classList.remove('explode');
          void confetti.offsetWidth;
          confetti.classList.add('explode');
          setTimeout(()=> confetti.classList.remove('explode'), 1200);
        }
      });

      // initialize display
      updateDisplay();

      // if previously voted, reflect state
      if(localStorage.getItem('gonepal_site_voted') === 'true'){
        try{
          submitBtn.disabled = true;
          submitBtn.textContent = 'Thankyou for rating.';
          submitBtn.style.opacity = '0.85';
        }catch(e){}
      }
    })();
  </script>
</body>
</html>